<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>출금 요청 완료 - GALLA</title>
    <link rel="stylesheet" href="./css/withdraw-done.css">
    <link rel="stylesheet" href="./css/nav.css">
</head>

<body data-page="mypage">

<div id="app">

    <!-- HEADER -->
    <header class="header">
        <div class="header-inner">
            <img src="assets/icons/back.svg" class="back-icon" onclick="goBackWithScroll()">
            <div class="header-title">출금 요청 완료</div>
            <div class="header-spacer"></div>
        </div>
    </header>

    <!-- ICON -->
    <div class="done-icon">
        <svg width="70" height="70" viewBox="0 0 24 24" fill="none">
            <circle cx="12" cy="12" r="9" stroke="white" stroke-width="2"/>
            <path d="M8 12l3 3 5-6" stroke="white" stroke-width="2" stroke-linecap="round"/>
        </svg>
    </div>

    <!-- TEXT -->
    <div class="done-title">출금 요청이 접수되었습니다!</div>
    <div class="done-desc">
        GALLA는 매월 1회 정산을 진행합니다.<br>
        요청하신 금액은 다음 정산월에 입금됩니다.
    </div>

    <!-- BUTTON -->
    <button class="done-btn" onclick="location.href='settings.html'">
        설정으로 돌아가기
    </button>

</div>


<!-- ============================= -->
<!-- ⭐ 공통 네비게이션 -->
<!-- ============================= -->
<nav class="nav">
  <div class="nav-inner">

    <button class="nav-item" data-page="index" data-target="index.html">
      <img src="assets/icons/nav-home.svg"
           data-base="assets/icons/nav-home.svg"
           data-active="assets/icons/nav-home-active.svg">
    </button>

    <button class="nav-item" data-page="search" data-target="search.html">
      <img src="assets/icons/nav-search.svg"
           data-base="assets/icons/nav-search.svg"
           data-active="assets/icons/nav-search-active.svg">
    </button>

    <button class="nav-item" data-page="write" data-target="write.html">
      <img src="assets/icons/nav-write.svg"
           data-base="assets/icons/nav-write.svg"
           data-active="assets/icons/nav-write-active.svg">
    </button>

    <button class="nav-item" data-page="plaza" data-target="plaza.html">
      <img src="assets/icons/nav-plaza.svg"
           data-base="assets/icons/nav-plaza.svg"
           data-active="assets/icons/nav-plaza-active.svg">
    </button>

    <button class="nav-item" data-page="mypage" data-target="mypage.html">
      <img src="assets/icons/nav-user.svg"
           data-base="assets/icons/nav-user.svg"
           data-active="assets/icons/nav-user-active.svg">
    </button>

  </div>
</nav>

<script src="./js/nav.js"></script>


<!-- ============================= -->
<!-- 로그인 여부 체크 + supabase wait -->
<!-- ============================= -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.js"></script>
<script src="./js/supabase.js"></script>

<script>
/* Supabase 로딩 대기 */
function waitForSupabaseClient() {
    return new Promise(resolve => {
        const timer = setInterval(() => {
            if (window.supabaseClient) {
                clearInterval(timer);
                resolve(window.supabaseClient);
            }
        }, 20);
    });
}

/* 비로그인 접근 차단 */
(async () => {
    const supabase = await waitForSupabaseClient();
    const { data } = await supabase.auth.getSession();

    if (!data.session?.user) {
        alert("로그인이 필요한 서비스입니다.");
        location.href = "login.html";
    }
})();
</script>


<!-- ============================= -->
<!-- 뒤로가기 + 스크롤 복원 -->
<!-- ============================= -->
<script>
function goBackWithScroll() {
    sessionStorage.setItem("scrollRestore", "on");
    history.back();
}

document.addEventListener("DOMContentLoaded", () => {
    const restore = sessionStorage.getItem("scrollRestore");

    if (restore === "on") {
        const pos = sessionStorage.getItem("lastScrollPosition") || 0;
        window.scrollTo(0, Number(pos));

        sessionStorage.removeItem("scrollRestore");
        sessionStorage.removeItem("lastScrollPosition");
    }
});

window.addEventListener("scroll", () => {
    sessionStorage.setItem("lastScrollPosition", window.scrollY);
});
</script>



</body>
</html>