<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>새 갈라 만들기 - GALLA</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
<link rel="stylesheet" href="./css/write.css" />

<style>
/* ===== 익명 토글 ===== */
.anonymous-wrap {
  padding: 18px 16px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.toggle {
  position: relative;
  width: 44px;
  height: 24px;
}
.toggle input {
  display: none;
}
.toggle span {
  position: absolute;
  inset: 0;
  background: #222;
  border-radius: 999px;
  transition: .25s;
}
.toggle span::after {
  content: "";
  position: absolute;
  top: 3px;
  left: 3px;
  width: 18px;
  height: 18px;
  background: #fff;
  border-radius: 50%;
  transition: .25s;
}
.toggle input:checked + span {
  background: #2f80ff;
}
.toggle input:checked + span::after {
  transform: translateX(20px);
}

/* ===== 미리보기 ===== */
.upload-preview {
  margin-top: 10px;
  display: none;
}
.upload-preview small {
  display: block;
  font-size: 12px;
  color: #888;
  margin-bottom: 6px;
}
.upload-preview img,
.upload-preview video {
  width: 180px;
  border-radius: 12px;
  border: 1px solid #222;
  background: #000;
}

/* 버튼 클릭 방지 버그 차단 */
button {
  pointer-events: auto;
  z-index: 5;
  position: relative;
}
</style>
</head>

<body>
<div class="app-root">

<header class="header">
  <div class="header-inner">
    <img src="./assets/logo.png" class="logo" />
  </div>
</header>

<main class="page-main">
<div class="page-inner">

<section class="section-block">
  <h1 class="write-main-title">새 갈라치기 만들기</h1>
  <p class="write-main-desc">사람들의 찬반과 후원을 모아보세요.</p>
</section>

<section class="section-block write-guide-block">
<ul class="write-guide-list">
  <li>제목은 최대 80자 이내</li>
  <li>논쟁 포인트가 명확할수록 참여율 증가</li>
  <li>AI로 글을 다듬을 수 있음</li>
</ul>
</section>

<!-- ✅ 익명 토글 (설명란 바로 아래) -->
<section class="anonymous-wrap">
  <span>익명으로 발의하기</span>
  <label class="toggle">
    <input type="checkbox" id="anonymousToggle">
    <span></span>
  </label>
</section>

<form id="writeForm">

<div class="field-block">
<label class="field-label">카테고리 (필수)</label>
<select class="input-field">
<option>직장·경력</option>
</select>
</div>

<div class="field-block">
<label class="field-label">이슈 썸네일 (필수)</label>
<input type="file" id="thumbnail" accept="image/*" hidden>
<button type="button" id="thumbnailBtn" class="file-btn input-field">썸네일 업로드</button>
<div class="upload-preview" id="thumbnailPreview">
<small>미리보기</small>
<img>
</div>
</div>

<div class="field-block">
<label class="field-label">1분 엘리베이터 스피치 (선택)</label>
<input type="file" id="video" accept="video/*" hidden>
<button type="button" id="videoBtn" class="file-btn input-field">영상 업로드</button>
<div class="upload-preview" id="videoPreview">
<small>미리보기</small>
<video controls></video>
</div>
</div>

<div class="field-block">
<label class="field-label">이슈 설명</label>
<textarea class="input-field textarea" id="description"></textarea>
<button type="button" id="openAiModal" class="ai-main-btn">✨ AI에게 글 다듬기</button>
</div>

<div class="field-block">
<label class="field-label">관련 기사·자료 링크 (선택)</label>
<input class="input-field" value="https://">
<input class="input-field" value="https://">
<input class="input-field" value="https://">
</div>

<div class="field-block">
<button type="button" class="primary-btn">미리보기</button>
</div>

</form>
</div>
</main>

</div>

<!-- ===== JS (버튼 안 먹는 문제 해결 핵심) ===== -->
<script>
/* 썸네일 */
thumbnailBtn.onclick = () => thumbnail.click();
thumbnail.onchange = e => {
  const f = e.target.files[0];
  if (!f) return;
  const img = thumbnailPreview.querySelector("img");
  img.src = URL.createObjectURL(f);
  thumbnailPreview.style.display = "block";
};

/* 영상 */
videoBtn.onclick = () => video.click();
video.onchange = e => {
  const f = e.target.files[0];
  if (!f) return;
  const v = videoPreview.querySelector("video");
  v.src = URL.createObjectURL(f);
  videoPreview.style.display = "block";
};

/* 익명 토글 확인 */
anonymousToggle.onchange = e => {
  console.log("익명 발의:", e.target.checked);
};

/* AI 버튼 */
openAiModal.onclick = () => {
  alert("AI 모달 연결 준비됨");
};
</script>

</body>
</html>