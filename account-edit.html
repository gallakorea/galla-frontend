<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>계정 정보 수정 - GALLA</title>
    <link rel="stylesheet" href="./css/account-edit.css">

    <style>
        /* 네비 기본 스타일 (공통) */
        nav.nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 480px;
            background: #000;
            border-top: 1px solid #1a1a1a;
            padding: 10px 0;
            display: flex;
            justify-content: center;
            z-index: 999;
        }

        .nav-inner {
            width: 100%;
            max-width: 480px;
            display: flex;
            justify-content: space-around;
        }

        .nav-icon {
            width: 26px;
            filter: brightness(0) invert(1);
            opacity: 0.8;
            cursor: pointer;
        }

        .nav-icon.active {
            opacity: 1;
        }

        /* 페이지 하단 공간 확보 */
        #app {
            padding-bottom: 110px;
        }
    </style>
</head>

<body>

<div id="app">

    <!-- HEADER -->
    <header class="header">
        <div class="header-inner">
            <div class="back-btn" onclick="history.back()">←</div>
            <div class="header-title">계정 정보 수정</div>
            <div class="header-spacer"></div>
        </div>
    </header>

    <!-- PROFILE IMAGE -->
    <section class="section">
        <div class="profile-img-wrap">
            <img src="./assets/logo.png" id="profilePreview" class="profile-img">
            <label for="profileInput" class="change-photo">사진 변경</label>
            <input type="file" id="profileInput" accept="image/*" hidden>
        </div>
    </section>

    <!-- INPUTS -->
    <section class="section">

        <div class="input-group">
            <div class="input-label">닉네임</div>
            <input type="text" class="input-field" value="익명의 사용자">
        </div>

        <div class="input-group">
            <div class="input-label">소개 문구</div>
            <textarea class="input-field textarea">소개 문구가 여기에 표시됩니다.</textarea>
        </div>

        <div class="input-group readonly">
            <div class="input-label">이메일</div>
            <div class="input-value">user@galla.com</div>
        </div>

        <div class="input-group readonly">
            <div class="input-label">전화번호</div>
            <div class="input-value">010-1234-5678</div>
        </div>

    </section>

    <!-- SAVE BUTTON -->
    <section class="section">
        <button class="save-btn">저장하기</button>
    </section>

</div>

<!-- ============================= -->
<!-- ⭐ NAVIGATION (모든 페이지 동일) -->
<!-- ============================= -->
<nav class="nav">
    <div class="nav-inner">

        <img src="./assets/icons/nav-home.svg"
             class="nav-icon nav-item"
             data-target="index.html"/>

        <img src="./assets/icons/nav-search.svg"
             class="nav-icon nav-item"
             data-target="search.html"/>

        <img src="./assets/icons/nav-write.svg"
             class="nav-icon nav-item"
             data-target="write.html"/>

        <img src="./assets/icons/nav-random.svg"
             class="nav-icon nav-item"
             data-target="random.html"/>

        <img src="./assets/icons/nav-user.svg"
             class="nav-icon nav-item active"
             data-target="mypage.html"/>

    </div>
</nav>

<script>
    /* 네비게이터 링크 활성화 */
    document.querySelectorAll(".nav-item").forEach(icon => {
        icon.addEventListener("click", () => {
            const target = icon.dataset.target;
            if (target) location.href = target;
        });
    });

    /* 뒤로가기 개선: 이전 위치까지 복구 */
    document.querySelector(".back-btn").addEventListener("click", () => {
        if (document.referrer) {
            history.back();
        } else {
            location.href = "mypage.html";
        }
    });
</script>

<script src="https://esm.sh/@supabase/supabase-js@2"></script>
<script src="js/supabase.js"></script>
<script src="./js/account-edit.js"></script>

</body>
</html>